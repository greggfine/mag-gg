var x=Object.defineProperty;var L=(t,e,n)=>e in t?x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var g=(t,e,n)=>(L(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const p=()=>parseFloat(Math.random().toFixed(1)),b=document.querySelector("#start-game-btn"),h=document.querySelector("#answer-buttons"),C=document.querySelectorAll(".answer-buttons__btn"),k=document.querySelector("#current-round"),G=document.querySelector("#total-rounds"),S=document.querySelector("#score"),w=document.querySelector("#play-again-btn"),d=document.querySelector("#mute-btn"),y=document.getElementById("waveform"),i=document.getElementById("before-gain-btn"),l=document.getElementById("after-gain-btn"),q=new Audio("./audio/correctAnswer.wav"),I=new Audio("./audio/wrongAnswer.wav"),a=new AudioContext,A=3;let m=1,f=0;function E(){if(b.disabled=!0,y.style.display="block",y.style.visibility="visible",m<=A){D(),m++;const{correctAnswer:t,wrongAnswer:e,randomGainVal:n}=O();R(t,e),F("audio/pop.mp3",n,2)}else y.style.visibility="hidden",w.style.visibility="visible",w.addEventListener("click",M)}function D(){k.textContent=m.toString(),G.textContent=A.toString()}function O(){const t=p(),e=parseFloat((1-t).toFixed(1));let n=p();for(;n===e;)n=p();return{correctAnswer:e,wrongAnswer:n,randomGainVal:t}}function R(t,e){const n=Math.round(Math.random());C.forEach((r,o)=>{r.style.backgroundColor="",r.style.color="#000",o===n?(r.textContent=t.toString(),r.dataset.answer="correct"):(r.textContent=e.toString(),r.dataset.answer="wrong")})}function F(t,e,n){a.state==="suspended"&&a.resume();const r=new Audio(t),o=a.createMediaElementSource(r),s=a.createGain();s.gain.value=1,V(s,e,a.currentTime),i.style.color="#fff",i.style.textDecoration="underline",l.style.color="#c6c0c0",r.play(),o.connect(s),s.connect(a.destination);const c=B=>{y.style.visibility="hidden";const u=B.target;u.dataset.answer==="correct"?(u.style.backgroundColor="green",u.style.color="#fff",f+=1,S.textContent=f.toString(),q.play()):(u.style.backgroundColor="red",u.style.color="#fff",I.play()),r.pause(),h.removeEventListener("click",c),setTimeout(E,n*1e3)},v=()=>{r.muted=!r.muted,r.muted?d.src="images/mute.svg":d.src="images/speaker.svg"};h.addEventListener("click",c),d.removeEventListener("click",v),d.addEventListener("click",v)}function M(){w.style.visibility="hidden",C.forEach(t=>{t.style.backgroundColor="",b.disabled=!1,m=1,f=0,S.textContent=f.toString()})}class T{constructor(){g(this,"startButton");g(this,"instructionsContainer");this.startButton=document.getElementById("start-game-btn"),this.instructionsContainer=document.getElementById("instructions-container"),this.startButton.addEventListener("click",this.startGame.bind(this))}startGame(){this.instructionsContainer.style.transition="all 0.5s ease",setTimeout(()=>{this.instructionsContainer.style.opacity="0",setTimeout(()=>{this.instructionsContainer.style.display="none",this.instructionsContainer.style.opacity="1"},500)},0),E()}}new T;function V(t,e,n){l.addEventListener("click",()=>{t.gain.value===1&&t.gain.setValueAtTime(e,n),l.style.color="#fff",l.style.textDecoration="underline",i.style.color="#c6c0c0",i.style.textDecoration="none"}),i.addEventListener("click",()=>{t.gain.value!==1&&t.gain.setValueAtTime(1,n),l.style.color="#c6c0c0",l.style.textDecoration="none",i.style.color="#fff",i.style.textDecoration="underline"})}
